<section class="section hero">
  <div class="container hero-content">
  </div>
</section>

<section class="section painel">
  <div class="container">
    <div class="columns is-centered">
        
        <div class="column is-3">        
          <%= render 'admin/admin_menu' if current_user.admin? %>
          <%= render 'admin/producer_admin_menu' if current_user.producer_admin? %>
        </div>


      <div class="column is-6">
        <div class="card">
          <div class="card-content">
            <p class="title is-size-2">Editar Empresa</p>

              <%= form_with(model: @company, local: true) do |f| %>
                <% if @company.errors.any? %>
                  <article class="message signup is-danger">
                    <div class="message-body">
                      <h2><%= pluralize(product.errors.count, "erro") %> impediu que esta empresa fosse criada:</h2>
                      <ul>
                      <% product.errors.full_messages.each do |message| %>
                        <li><%= message %></li>
                      <% end %>
                      </ul>
                    </div>
                  </article>
                <% end %>


                <div class="field">
                  <label class="label">Nome da Empresa</label>
                  <div class="control has-icons-left has-icons-right">
                    <%= f.text_field :name, class: "input", placeholder: "Nome Fantasia" %>
                    <span class="icon is-small is-left">
                      <i class="far fa-building"></i>
                    </span>
                  </div>
                </div>

                <div class="columns">
                  <div class="column">
                    <p class="subtitle">Cadastrar Equipe</p>

                    <%= fields_for @user.email do |e| %>
                    <%= e.email_field :email %>
                    <% end %>

                    <%= fields_for @user.role do |e| %>
                    <%= e.select :role, options_for_select([['Equipe', 1], ['Gerente', 2]]), include_blank: true %>
                    <% end %>

                  </div>
                  <div class="column">
                    <p class="subtitle">Equipe cadastrada:</p>
                    <ul>
                      <% @staff.each do |s| %>
                        <li> <%= s.name.full %><%= link_to "Apagar", controller: "companies", action: "remove_staff", user_id: s.id %> </li>
                      <% end %>
                    </ul>
                  </div>
                </div>

                <div class="control">
                  <%= f.button "Editar", class: "button is-primary is-medium", data: { "disable-with": "<i class='fa fa-spinner fa-spin'></i> Aguarde..." } %>
                </div>
              <% end %>

          </div>
        </div>

      </div>
    </div>
  </div>
</section>