import * as Vibrant from 'node-vibrant';

let v = new Vibrant(imgurl);
v.getPalette((err, palette) => {
    let darkvibrant = palette.DarkVibrant.getRgb();
    let vibrant = palette.Vibrant.getRgb();
    let muted = palette.Muted.getRgb();
    let darkmuted = palette.DarkMuted.getRgb();
    let lightvibrant = palette.LightVibrant.getHex();
    let lightmuted = palette.LightMuted.getRgb();

    var elem = document.getElementById('infobar');
    elem.setAttribute('style', 'background-image: linear-gradient(to right, rgba('+darkvibrant+',0.3), rgba('+vibrant+',0.3));');

    var style = document.createElement('style');
    style.type = 'text/css';
    style.innerHTML = '.vibrantbg { background-color: rgb('+vibrant+'); } .mutedbg { background-color: rgb('+muted+'); } .darkvibrantbg { background-color: rgb('+darkvibrant+'); } .darkmutedbg { background-color: rgb('+darkmuted+'); } .lightvibrantbg { background-color: rgb('+lightvibrant+'); } .lightmutedbg { background-color: rgba('+lightmuted+', 0.1); } .vibrant { color: rgb('+vibrant+'); } .muted { color: rgb('+muted+'); } .darkvibrant { color: rgb('+darkvibrant+'); } .darkmuted { color: rgb('+darkmuted+'); } .lightvibrant { color: '+lightvibrant+'; } .lightmuted { color: rgb('+lightmuted+'); }';
    document.getElementsByTagName('footer')[0].appendChild(style);
});
